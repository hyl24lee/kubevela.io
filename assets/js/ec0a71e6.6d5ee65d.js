(self.webpackChunkkubevela_io=self.webpackChunkkubevela_io||[]).push([[41221],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return c},kt:function(){return k}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},p=Object.keys(e);for(a=0;a<p.length;a++)n=p[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(a=0;a<p.length;a++)n=p[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),s=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,p=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=s(n),k=r,u=d["".concat(l,".").concat(k)]||d[k]||m[k]||p;return n?a.createElement(u,o(o({ref:t},c),{},{components:n})):a.createElement(u,o({ref:t},c))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var p=n.length,o=new Array(p);o[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var s=2;s<p;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},29573:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return o},metadata:function(){return i},toc:function(){return l},default:function(){return c}});var a=n(22122),r=n(19756),p=(n(67294),n(3905)),o={title:"Built-in Steps"},i={unversionedId:"end-user/workflow/built-in-workflow-defs",id:"end-user/workflow/built-in-workflow-defs",isDocsHomePage:!1,title:"Built-in Steps",description:"This documentation will walk through the built-in workflow steps that you can use to design an application deployment process.",source:"@site/docs/end-user/workflow/built-in-workflow-defs.md",sourceDirName:"end-user/workflow",slug:"/end-user/workflow/built-in-workflow-defs",permalink:"/docs/next/end-user/workflow/built-in-workflow-defs",editUrl:"https://github.com/oam-dev/kubevela.io/edit/main/docs/end-user/workflow/built-in-workflow-defs.md",version:"current",lastUpdatedBy:"Tianxin Dong",lastUpdatedAt:1637035073,formattedLastUpdatedAt:"11/16/2021",frontMatter:{title:"Built-in Steps"},sidebar:"docs",previous:{title:"Health Check Policy",permalink:"/docs/next/end-user/policies/health"},next:{title:"Webhook Notification",permalink:"/docs/next/end-user/workflow/webhook-notification"}},l=[{value:"apply-application",id:"apply-application",children:[{value:"Overview",id:"overview",children:[]},{value:"Parameter",id:"parameter",children:[]},{value:"Example",id:"example",children:[]}]},{value:"depends-on-app",id:"depends-on-app",children:[{value:"Overview",id:"overview-1",children:[]},{value:"Parameter",id:"parameter-1",children:[]},{value:"Example",id:"example-1",children:[]}]},{value:"deploy2env",id:"deploy2env",children:[{value:"Overview",id:"overview-2",children:[]},{value:"Parameter",id:"parameter-2",children:[]},{value:"Example",id:"example-2",children:[]}]},{value:"webhook-notification",id:"webhook-notification",children:[{value:"Overview",id:"overview-3",children:[]},{value:"Parameters",id:"parameters",children:[]},{value:"Example",id:"example-3",children:[]}]},{value:"apply-object",id:"apply-object",children:[{value:"Overview",id:"overview-4",children:[]},{value:"Parameters",id:"parameters-1",children:[]},{value:"Example",id:"example-4",children:[]}]},{value:"read-object",id:"read-object",children:[{value:"Overview",id:"overview-5",children:[]},{value:"Parameters",id:"parameters-2",children:[]},{value:"Example",id:"example-5",children:[]}]},{value:"export2config",id:"export2config",children:[{value:"Overview",id:"overview-6",children:[]},{value:"Parameters",id:"parameters-3",children:[]},{value:"Example",id:"example-6",children:[]}]},{value:"export2secret",id:"export2secret",children:[{value:"Overview",id:"overview-7",children:[]},{value:"Parameters",id:"parameters-4",children:[]},{value:"Example",id:"example-7",children:[]}]},{value:"suspend",id:"suspend",children:[{value:"Overview",id:"overview-8",children:[]},{value:"Parameter",id:"parameter-3",children:[]},{value:"Example",id:"example-8",children:[]}]}],s={toc:l};function c(e){var t=e.components,n=(0,r.Z)(e,["components"]);return(0,p.kt)("wrapper",(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,p.kt)("p",null,"This documentation will walk through the built-in workflow steps that you can use to design an application deployment process."),(0,p.kt)("h2",{id:"apply-application"},"apply-application"),(0,p.kt)("h3",{id:"overview"},"Overview"),(0,p.kt)("p",null,"Apply all components and traits in Application."),(0,p.kt)("h3",{id:"parameter"},"Parameter"),(0,p.kt)("p",null,"No arguments, used for custom steps before or after application applied."),(0,p.kt)("h3",{id:"example"},"Example"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: core.oam.dev/v1beta1\nkind: Application\nmetadata:\n  name: first-vela-workflow\n  namespace: default\nspec:\n  components:\n  - name: express-server\n    type: webservice\n    properties:\n      image: crccheck/hello-world\n      port: 8000\n    traits:\n    - type: ingress\n      properties:\n        domain: testsvc.example.com\n        http:\n          /: 8000\n  workflow:\n    steps:\n      - name: express-server\n        type: apply-application\n")),(0,p.kt)("h2",{id:"depends-on-app"},"depends-on-app"),(0,p.kt)("h3",{id:"overview-1"},"Overview"),(0,p.kt)("p",null,"Wait for the specified Application to complete."),(0,p.kt)("blockquote",null,(0,p.kt)("p",{parentName:"blockquote"},(0,p.kt)("inlineCode",{parentName:"p"},"depends-on-app")," will check if the cluster has the application with ",(0,p.kt)("inlineCode",{parentName:"p"},"name")," and ",(0,p.kt)("inlineCode",{parentName:"p"},"namespace")," defines in ",(0,p.kt)("inlineCode",{parentName:"p"},"properties"),".\nIf the application exists, the next step will be executed after the application is running.\nIf the application do not exists, KubeVela will check the ConfigMap with the same name, and read the config of the Application and apply to cluster.\nThe ConfigMap is like below: the ",(0,p.kt)("inlineCode",{parentName:"p"},"name")," and ",(0,p.kt)("inlineCode",{parentName:"p"},"namespace")," of the ConfigMap is the same in properties. In data, the key is ",(0,p.kt)("inlineCode",{parentName:"p"},"name"),", and the value is the yaml of the deployed application yaml."),(0,p.kt)("pre",{parentName:"blockquote"},(0,p.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: myapp\n  namespace: vela-system\ndata:\n  myapp: ...\n"))),(0,p.kt)("h3",{id:"parameter-1"},"Parameter"),(0,p.kt)("table",null,(0,p.kt)("thead",{parentName:"table"},(0,p.kt)("tr",{parentName:"thead"},(0,p.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,p.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,p.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,p.kt)("tbody",{parentName:"table"},(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"name"),(0,p.kt)("td",{parentName:"tr",align:"center"},"string"),(0,p.kt)("td",{parentName:"tr",align:"center"},"The name of the Application")),(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"namespace"),(0,p.kt)("td",{parentName:"tr",align:"center"},"string"),(0,p.kt)("td",{parentName:"tr",align:"center"},"The namespace of the Application")))),(0,p.kt)("h3",{id:"example-1"},"Example"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: core.oam.dev/v1beta1\nkind: Application\nmetadata:\n  name: first-vela-workflow\n  namespace: default\nspec:\n  components:\n  - name: express-server\n    type: webservice\n    properties:\n      image: crccheck/hello-world\n      port: 8000\n    traits:\n    - type: ingress\n      properties:\n        domain: testsvc.example.com\n        http:\n          /: 8000\n  workflow:\n    steps:\n      - name: express-server\n        type: depends-on-app\n        properties:\n          name: another-app\n          namespace: default\n")),(0,p.kt)("h2",{id:"deploy2env"},"deploy2env"),(0,p.kt)("h3",{id:"overview-2"},"Overview"),(0,p.kt)("p",null,"Apply Application in different policies and envs."),(0,p.kt)("h3",{id:"parameter-2"},"Parameter"),(0,p.kt)("table",null,(0,p.kt)("thead",{parentName:"table"},(0,p.kt)("tr",{parentName:"thead"},(0,p.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,p.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,p.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,p.kt)("tbody",{parentName:"table"},(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"policy"),(0,p.kt)("td",{parentName:"tr",align:"center"},"string"),(0,p.kt)("td",{parentName:"tr",align:"center"},"The name of the policy")),(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"env"),(0,p.kt)("td",{parentName:"tr",align:"center"},"string"),(0,p.kt)("td",{parentName:"tr",align:"center"},"The name of the env")))),(0,p.kt)("h3",{id:"example-2"},"Example"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: core.oam.dev/v1beta1\nkind: Application\nmetadata:\n  name: multi-env-demo\n  namespace: default\nspec:\n  components:\n    - name: nginx-server\n      type: webservice\n      properties:\n        image: nginx:1.21\n        port: 80\n\n  policies:\n    - name: env\n      type: env-binding\n      properties:\n        created: false\n        envs:\n          - name: test\n            patch:\n              components:\n                - name: nginx-server\n                  type: webservice\n                  properties:\n                    image: nginx:1.20\n                    port: 80\n            placement:\n              namespaceSelector:\n                name: test\n          - name: prod\n            patch:\n              components:\n                - name: nginx-server\n                  type: webservice\n                  properties:\n                    image: nginx:1.20\n                    port: 80\n            placement:\n              namespaceSelector:\n                name: prod\n\n  workflow:\n    steps:\n      - name: deploy-test-server\n        type: deploy2env\n        properties:\n          policy: env\n          env: test\n      - name: deploy-prod-server\n        type: deploy2env\n        properties:\n          policy: env\n          env: prod\n")),(0,p.kt)("h2",{id:"webhook-notification"},"webhook-notification"),(0,p.kt)("h3",{id:"overview-3"},"Overview"),(0,p.kt)("p",null,"Send messages to the webhook address, you need to upgrade to KubeVela v1.1.6 or higher to enable ",(0,p.kt)("inlineCode",{parentName:"p"},"apply-object"),"."),(0,p.kt)("h3",{id:"parameters"},"Parameters"),(0,p.kt)("table",null,(0,p.kt)("thead",{parentName:"table"},(0,p.kt)("tr",{parentName:"thead"},(0,p.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,p.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,p.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,p.kt)("tbody",{parentName:"table"},(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"slack"),(0,p.kt)("td",{parentName:"tr",align:"center"},"Object"),(0,p.kt)("td",{parentName:"tr",align:"left"},"Optional, please fulfill its url and message if you want to send Slack messages")),(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"slack.url"),(0,p.kt)("td",{parentName:"tr",align:"center"},"Object"),(0,p.kt)("td",{parentName:"tr",align:"left"},"Required, the webhook address of Slack, you can choose to fill it in directly or specify it in secret")),(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"slack.url.address"),(0,p.kt)("td",{parentName:"tr",align:"center"},"String"),(0,p.kt)("td",{parentName:"tr",align:"left"},"Optional, directly specify the webhook address of Slack")),(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"slack.url.fromSecret.name"),(0,p.kt)("td",{parentName:"tr",align:"center"},"String"),(0,p.kt)("td",{parentName:"tr",align:"left"},"Optional, specify the webhook address of Slack from secret")),(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"slack.url.fromSecret.key"),(0,p.kt)("td",{parentName:"tr",align:"center"},"String"),(0,p.kt)("td",{parentName:"tr",align:"left"},"Optional, specify the webhook address of Slack from secret, the key of the secret")),(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"slack.message"),(0,p.kt)("td",{parentName:"tr",align:"center"},"Object"),(0,p.kt)("td",{parentName:"tr",align:"left"},"Required, the Slack messages you want to send, please follow ",(0,p.kt)("a",{parentName:"td",href:"https://api.slack.com/reference/messaging/payload"},"Slack messaging"))),(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"dingding"),(0,p.kt)("td",{parentName:"tr",align:"center"},"Object"),(0,p.kt)("td",{parentName:"tr",align:"left"},"Optional, please fulfill its url and message if you want to send DingTalk messages")),(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"dingding.url"),(0,p.kt)("td",{parentName:"tr",align:"center"},"Object"),(0,p.kt)("td",{parentName:"tr",align:"left"},"Required, the webhook address of DingTalk, you can choose to fill it in directly or specify it in secret")),(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"dingding.url.address"),(0,p.kt)("td",{parentName:"tr",align:"center"},"String"),(0,p.kt)("td",{parentName:"tr",align:"left"},"Optional, directly specify the webhook address of DingTalk")),(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"dingding.url.fromSecret.name"),(0,p.kt)("td",{parentName:"tr",align:"center"},"String"),(0,p.kt)("td",{parentName:"tr",align:"left"},"Optional, specify the webhook address of DingTalk from secret")),(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"dingding.url.fromSecret.key"),(0,p.kt)("td",{parentName:"tr",align:"center"},"String"),(0,p.kt)("td",{parentName:"tr",align:"left"},"Optional, specify the webhook address of DingTalk from secret, the key of the secret")),(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"dingding.message"),(0,p.kt)("td",{parentName:"tr",align:"center"},"Object"),(0,p.kt)("td",{parentName:"tr",align:"left"},"Required, the DingTalk messages you want to send, please follow ",(0,p.kt)("a",{parentName:"td",href:"https://developers.dingtalk.com/document/robots/custom-robot-access/title-72m-8ag-pqw"},"DingTalk messaging"))))),(0,p.kt)("h3",{id:"example-3"},"Example"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: core.oam.dev/v1beta1\nkind: Application\nmetadata:\n  name: first-vela-workflow\n  namespace: default\nspec:\n  components:\n  - name: express-server\n    type: webservice\n    properties:\n      image: crccheck/hello-world\n      port: 8000\n    traits:\n    - type: ingress\n      properties:\n        domain: testsvc.example.com\n        http:\n          /: 8000\n  workflow:\n    steps:\n      - name: dingtalk-message\n        type: webhook-notification\n        properties:\n          dingding:\n            # the DingTalk webhook address, please refer to: https://developers.dingtalk.com/document/robots/custom-robot-access\n            url:\n              address: <your dingtalk url>\n            message:\n              msgtype: text\n              text:\n                context: Workflow starting...\n      - name: application\n        type: apply-application\n      - name: slack-message\n        type: webhook-notification\n        properties:\n          slack:\n            # the Slack webhook address, please refer to: https://api.slack.com/messaging/webhooks\n            url:\n              fromSecret:\n                name: <the secret name that stores your slack url>\n                key: <the secret key that stores your slack url>\n            message:\n              text: Workflow ended.\n")),(0,p.kt)("h2",{id:"apply-object"},"apply-object"),(0,p.kt)("h3",{id:"overview-4"},"Overview"),(0,p.kt)("p",null,"Apply Kubernetes native resources, you need to upgrade to KubeVela v1.1.4 or higher to enable ",(0,p.kt)("inlineCode",{parentName:"p"},"apply-object"),"."),(0,p.kt)("h3",{id:"parameters-1"},"Parameters"),(0,p.kt)("table",null,(0,p.kt)("thead",{parentName:"table"},(0,p.kt)("tr",{parentName:"thead"},(0,p.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,p.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,p.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,p.kt)("tbody",{parentName:"table"},(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"value"),(0,p.kt)("td",{parentName:"tr",align:"center"},"Object"),(0,p.kt)("td",{parentName:"tr",align:"center"},"Required, Kubernetes native resources fields")),(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"cluster"),(0,p.kt)("td",{parentName:"tr",align:"center"},"String"),(0,p.kt)("td",{parentName:"tr",align:"center"},"Optional, The cluster you want to apply the resource to, default is the current cluster. If you want to apply resource in different cluster, use ",(0,p.kt)("inlineCode",{parentName:"td"},"vela cluster join")," to join the cluster first, and then specify the cluster")))),(0,p.kt)("h3",{id:"example-4"},"Example"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: core.oam.dev/v1beta1\nkind: Application\nmetadata:\n  name: server-with-pvc\n  namespace: default\nspec:\n  components:\n  - name: express-server\n    type: webservice\n    properties:\n      image: crccheck/hello-world\n      port: 8000\n      volumes:\n        - name: "my-pvc"\n          type: "pvc"\n          mountPath: "/test"\n          claimName: "myclaim"\n\n  workflow:\n    steps:\n      - name: apply-pvc\n        type: apply-object\n        properties:\n          # Kubernetes native resources fields\n          value:\n            apiVersion: v1\n            kind: PersistentVolumeClaim\n            metadata:\n              name: myclaim\n              namespace: default\n            spec:\n              accessModes:\n              - ReadWriteOnce\n              resources:\n                requests:\n                  storage: 8Gi\n              storageClassName: standard\n            # the cluster you want to apply the resource to, default is the current cluster\n            cluster: <your cluster name>  \n      - name: apply-server\n        type: apply-component\n        properties:\n          component: express-serve\n')),(0,p.kt)("h2",{id:"read-object"},"read-object"),(0,p.kt)("h3",{id:"overview-5"},"Overview"),(0,p.kt)("p",null,"Read Kubernetes native resources, you need to upgrade to KubeVela v1.1.6 or higher to enable ",(0,p.kt)("inlineCode",{parentName:"p"},"read-object"),"."),(0,p.kt)("h3",{id:"parameters-2"},"Parameters"),(0,p.kt)("table",null,(0,p.kt)("thead",{parentName:"table"},(0,p.kt)("tr",{parentName:"thead"},(0,p.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,p.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,p.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,p.kt)("tbody",{parentName:"table"},(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"apiVersion"),(0,p.kt)("td",{parentName:"tr",align:"center"},"String"),(0,p.kt)("td",{parentName:"tr",align:"center"},"Required, The apiVersion of the resource you want to read")),(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"kind"),(0,p.kt)("td",{parentName:"tr",align:"center"},"String"),(0,p.kt)("td",{parentName:"tr",align:"center"},"Required, The kind of the resource you want to read")),(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"name"),(0,p.kt)("td",{parentName:"tr",align:"center"},"String"),(0,p.kt)("td",{parentName:"tr",align:"center"},"Required, The apiVersion of the resource you want to read")),(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"namespace"),(0,p.kt)("td",{parentName:"tr",align:"center"},"String"),(0,p.kt)("td",{parentName:"tr",align:"center"},"Optional, The namespace of the resource you want to read, defaults to ",(0,p.kt)("inlineCode",{parentName:"td"},"default"))),(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"cluster"),(0,p.kt)("td",{parentName:"tr",align:"center"},"String"),(0,p.kt)("td",{parentName:"tr",align:"center"},"Optional, The cluster you want to read the resource from, default is the current cluster. If you want to read resource in different cluster, use ",(0,p.kt)("inlineCode",{parentName:"td"},"vela cluster join")," to join the cluster first, and then specify the cluster")))),(0,p.kt)("h3",{id:"example-5"},"Example"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: core.oam.dev/v1beta1\nkind: Application\nmetadata:\n  name: read-object\n  namespace: default\nspec:\n  components:\n  - name: express-server\n    type: webservice\n    properties:\n      image: crccheck/hello-world\n      port: 8000\n  workflow:\n    steps:\n    - name: read-object\n      type: read-object\n      outputs:\n        - name: cpu\n          valueFrom: output.value.data["cpu"]\n        - name: memory\n          valueFrom: output.value.data["memory"]\n      properties:\n        apiVersion: v1\n        kind: ConfigMap\n        name: my-cm-name\n        cluster: <your cluster name\n    - name: apply\n      type: apply-component\n      inputs:\n        - from: cpu\n          parameterKey: cpu\n        - from: memory\n          parameterKey: memory\n      properties:\n        component: express-server\n')),(0,p.kt)("h2",{id:"export2config"},"export2config"),(0,p.kt)("h3",{id:"overview-6"},"Overview"),(0,p.kt)("p",null,"Export data to ConfigMap, you need to upgrade to KubeVela v1.1.6 or higher to enable ",(0,p.kt)("inlineCode",{parentName:"p"},"export2config"),"."),(0,p.kt)("h3",{id:"parameters-3"},"Parameters"),(0,p.kt)("table",null,(0,p.kt)("thead",{parentName:"table"},(0,p.kt)("tr",{parentName:"thead"},(0,p.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,p.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,p.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,p.kt)("tbody",{parentName:"table"},(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"configName"),(0,p.kt)("td",{parentName:"tr",align:"center"},"String"),(0,p.kt)("td",{parentName:"tr",align:"center"},"Required, The name of the ConfigMap")),(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"namespace"),(0,p.kt)("td",{parentName:"tr",align:"center"},"String"),(0,p.kt)("td",{parentName:"tr",align:"center"},"Optional, The namespace of the ConfigMap, defaults to ",(0,p.kt)("inlineCode",{parentName:"td"},"context.namespace"))),(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"data"),(0,p.kt)("td",{parentName:"tr",align:"center"},"Map"),(0,p.kt)("td",{parentName:"tr",align:"center"},"Required, The data that you want to export to ConfigMap")))),(0,p.kt)("h3",{id:"example-6"},"Example"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: core.oam.dev/v1beta1\nkind: Application\nmetadata:\n  name: export-config\n  namespace: default\nspec:\n  components:\n  - name: express-server\n    type: webservice\n    properties:\n      image: crccheck/hello-world\n      port: 8000\n  workflow:\n    steps:\n      - name: apply-server\n        type: apply-component\n        outputs: \n          - name: status\n            valueFrom: output.status.conditions[0].message\n        properties:\n          component: express-server\n      - name: export-config\n        type: export-config\n        inputs:\n          - from: status\n            parameterKey: data.serverstatus\n        properties:\n          configName: my-configmap\n          data:\n            testkey: testvalue\n")),(0,p.kt)("h2",{id:"export2secret"},"export2secret"),(0,p.kt)("h3",{id:"overview-7"},"Overview"),(0,p.kt)("p",null,"Export data to Secret, you need to upgrade to KubeVela v1.1.6 or higher to enable ",(0,p.kt)("inlineCode",{parentName:"p"},"export2secret"),"."),(0,p.kt)("h3",{id:"parameters-4"},"Parameters"),(0,p.kt)("table",null,(0,p.kt)("thead",{parentName:"table"},(0,p.kt)("tr",{parentName:"thead"},(0,p.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,p.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,p.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,p.kt)("tbody",{parentName:"table"},(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"secretName"),(0,p.kt)("td",{parentName:"tr",align:"center"},"String"),(0,p.kt)("td",{parentName:"tr",align:"center"},"Required, The name of the Secret")),(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"namespace"),(0,p.kt)("td",{parentName:"tr",align:"center"},"String"),(0,p.kt)("td",{parentName:"tr",align:"center"},"Optional, The namespace of the Secret, defaults to ",(0,p.kt)("inlineCode",{parentName:"td"},"context.namespace"))),(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"data"),(0,p.kt)("td",{parentName:"tr",align:"center"},"Map"),(0,p.kt)("td",{parentName:"tr",align:"center"},"Required, The data that you want to export to Secret")))),(0,p.kt)("h3",{id:"example-7"},"Example"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: core.oam.dev/v1beta1\nkind: Application\nmetadata:\n  name: export-secret\n  namespace: default\nspec:\n  components:\n  - name: express-server\n    type: webservice\n    properties:\n      image: crccheck/hello-world\n      port: 8000\n  workflow:\n    steps:\n      - name: apply-server\n        type: apply-component\n        outputs: \n          - name: status\n            valueFrom: output.status.conditions[0].message\n        properties:\n          component: express-server\n      - name: export-secret\n        type: export-secret\n        inputs:\n          - from: status\n            parameterKey: data.serverstatus\n        properties:\n          secretName: my-secret\n          data:\n            testkey: testvalue\n")),(0,p.kt)("h2",{id:"suspend"},"suspend"),(0,p.kt)("h3",{id:"overview-8"},"Overview"),(0,p.kt)("p",null,"Suspend the current workflow, we can use ",(0,p.kt)("inlineCode",{parentName:"p"},"vela workflow resume appname")," to resume the suspended workflow."),(0,p.kt)("blockquote",null,(0,p.kt)("p",{parentName:"blockquote"},"For more information of ",(0,p.kt)("inlineCode",{parentName:"p"},"vela workflow"),", please refer to ",(0,p.kt)("a",{parentName:"p",href:"../../cli/vela_workflow"},"vela cli"),"\u3002")),(0,p.kt)("h3",{id:"parameter-3"},"Parameter"),(0,p.kt)("table",null,(0,p.kt)("thead",{parentName:"table"},(0,p.kt)("tr",{parentName:"thead"},(0,p.kt)("th",{parentName:"tr",align:"center"},"Name"),(0,p.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,p.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,p.kt)("tbody",{parentName:"table"},(0,p.kt)("tr",{parentName:"tbody"},(0,p.kt)("td",{parentName:"tr",align:"center"},"-"),(0,p.kt)("td",{parentName:"tr",align:"center"},"-"),(0,p.kt)("td",{parentName:"tr",align:"center"},"-")))),(0,p.kt)("h3",{id:"example-8"},"Example"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: core.oam.dev/v1beta1\nkind: Application\nmetadata:\n  name: first-vela-workflow\n  namespace: default\nspec:\n  components:\n  - name: express-server\n    type: webservice\n    properties:\n      image: crccheck/hello-world\n      port: 8000\n    traits:\n    - type: ingress\n      properties:\n        domain: testsvc.example.com\n        http:\n          /: 8000\n  workflow:\n    steps:\n      - name: slack-message\n        type: webhook-notification\n        properties:\n          slack:\n            # the Slack webhook address, please refer to: https://api.slack.com/messaging/webhooks\n            message:\n              text: Ready to apply the application, ask the administrator to approve and resume the workflow.\n      - name: manual-approval\n        type: suspend\n      - name: express-server\n        type: apply-application\n")))}c.isMDXComponent=!0}}]);